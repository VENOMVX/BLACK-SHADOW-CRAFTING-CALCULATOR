<!DOCTYPE html>
<html>
<head>
  <title>Black Shadow's Crafting Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: #eee;
      padding: 20px;
      /* Background image */
      background-image: url('https://cdn.cloudflare.steamstatic.com/steam/apps/1874880/header.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      /* Optional: add a dark overlay for readability */
      position: relative;
      min-height: 100vh;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(18,18,18,0.7); /* dark overlay */
      z-index: 0;
      pointer-events: none;
    }
    #content {
      position: relative;
      z-index: 1;
    }
    h1 {
      color: #00ffcc;
    }
    select, input, button {
      padding: 8px;
      margin: 10px 0;
      font-size: 16px;
    }
    .output {
      margin-top: 20px;
      background-color: #1e1e1e;
      padding: 15px;
      border-radius: 8px;
      white-space: pre-wrap;
    }
    #recipeContainer h3 {
      margin-top: 1em;
      color: #2a9d8f;
      font-size: 1.2em;
    }
    .recipe {
      padding-left: 1em;
    }
  </style>
</head>
<body>
  <div id="content">
  <h1>ðŸ”§ Black Shadow's Crafting Calculator</h1>

  <label for="item">Choose item:</label><br>
  <select id="item" onchange="calculate()">
    <option value="">-- Select an item --</option>
    <option value="M998 L.U.V (Canopy)">M998 L.U.V (Canopy)</option>
    <option value="M1025 Light-Armoured Vehicle">M1025 Light-Armoured Vehicle</option>
    <option value="PickUp Truck">PickUp Truck</option>
    <option value="VW Golf">VW Golf</option>
    <option value="M923A1 Transport Truck (Canopy)">M923A1 Transport Truck (Canopy)</option>
    <option value="Ural Fuel Truck">Ural Fuel Truck</option>
    <option value="Ural Transport Truck">Ural Transport Truck</option>
    <option value="Ural Canopy">Ural Canopy</option>
  </select><br>

  <label for="qty">Quantity:</label><br>
  <input type="number" id="qty" value="1" min="1"><br>

  <label for="sortType">Sort Recipes:</label><br>
  <select id="sortType" onchange="handleSortChange()">
    <option value="none">-- No Sorting --</option>
    <option value="alphabetical">Sort by Type (Aâ€“Z)</option>
    <option value="grouped">Group by Type</option>
  </select><br>

  <button onclick="calculate()">Calculate</button>
  <div class="output" id="output"></div>
  </div>
  <script>
    // Recipes for each craftable item
    const recipes = {
      "M998 L.U.V (Canopy)": { type: "Vehicle", "Mechanical Component": 6, "Interior Part": 4, "Engine Part": 6, multiplier: 20 },
      "M1025 Light-Armoured Vehicle": { type: "Vehicle", "Mechanical Component": 9, "Interior Part": 5, "Engine Part": 9, multiplier: 20 },
      "PickUp Truck": { type: "Vehicle", "Mechanical Component": 19, "Interior Part": 11, "Engine Part": 19, multiplier: 20 },
      "VW Golf": { type: "Vehicle", "Mechanical Component": 31, "Interior Part": 19, "Engine Part": 31, multiplier: 20 },
      "M923A1 Transport Truck (Canopy)": { type: "HQ Part", "Mechanical Component (HQ)": 2, "Interior Part (HQ)": 2, "Engine Part (HQ)": 1, multiplier: 20 },
      "Ural Fuel Truck": { type: "HQ Part", "Mechanical Component (HQ)": 4, "Interior Part (HQ)": 3, "Engine Part (HQ)": 2, multiplier: 20 },
      "Ural Transport Truck": { type: "HQ Part", "Mechanical Component (HQ)": 4, "Interior Part (HQ)": 3, "Engine Part (HQ)": 2, multiplier: 20 },
      "Ural Canopy": { type: "HQ Part", "Mechanical Component (HQ)": 5, "Interior Part (HQ)": 5, "Engine Part (HQ)": 3, multiplier: 20 }
    };

    function sortRecipesByType(recipesObj) {
      return Object.entries(recipesObj)
        .map(([name, data]) => ({ name, ...data }))
        .sort((a, b) => (a.type || "").localeCompare(b.type || ""));
    }

    function groupRecipesByType(recipesObj) {
      const grouped = {};
      for (const [name, data] of Object.entries(recipesObj)) {
        const type = data.type || "Unknown";
        if (!grouped[type]) grouped[type] = [];
        grouped[type].push({ name, ...data });
      }
      return grouped;
    }

    function renderGroupedRecipes(grouped) {
      const container = document.getElementById("output");
      container.innerHTML = "";
      for (const type in grouped) {
        const header = document.createElement("h3");
        header.textContent = type;
        container.appendChild(header);
        grouped[type].forEach(recipe => {
          const div = document.createElement("div");
          div.className = "recipe";
          div.textContent = recipe.name;
          container.appendChild(div);
        });
      }
    }

    function renderRecipes(recipeList) {
      const container = document.getElementById("output");
      container.innerText = "ðŸ§¾ Available Recipes:\n" + recipeList.map(r => r.name).join("\n");
    }

    function handleSortChange() {
      const value = document.getElementById("sortType").value;
      if (value === "alphabetical") {
        const sorted = sortRecipesByType(recipes);
        renderRecipes(sorted);
      } else if (value === "grouped") {
        const grouped = groupRecipesByType(recipes);
        renderGroupedRecipes(grouped);
      } else {
        renderRecipes(Object.entries(recipes).map(([name, data]) => ({ name, ...data })));
      }
    }

    // Updated calculation: Only show part counts, no raw breakdown
    function calculate() {
      const item = document.getElementById("item").value;
      const qty = parseInt(document.getElementById("qty").value);
      const recipe = recipes[item];
      const output = [];

      if (!recipe) {
        document.getElementById("output").innerText = "âŒ Item not found or not selected.";
        return;
      }

      const craftsNeeded = Math.ceil(qty / recipe.multiplier);

      output.push(`ðŸ”© Materials for ${qty} Ã— ${item} (Requires ${craftsNeeded} craft${craftsNeeded > 1 ? 's' : ''}, ${recipe.multiplier} per craft):\n`);

      for (const [part, count] of Object.entries(recipe)) {
        if (part !== "multiplier" && part !== "type") {
          const total = count * craftsNeeded;
          output.push(`${part}: ${total}`);
        }
      }

      document.getElementById("output").innerText = output.join("\n");
    }

    window.onload = () => {
      renderRecipes(Object.entries(recipes).map(([name, data]) => ({ name, ...data })));
    };
  </script>
</body>
</html>
  
