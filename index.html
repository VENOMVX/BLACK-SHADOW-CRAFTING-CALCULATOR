<!DOCTYPE html>
<html>
<head>
  <title>Black Shadow's Crafting Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: #eee;
      padding: 20px;
      background-image: url('https://cdn.cloudflare.steamstatic.com/steam/apps/1874880/header.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      position: relative;
      min-height: 100vh;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(18,18,18,0.7);
      z-index: 0;
      pointer-events: none;
    }
    #content {
      position: relative;
      z-index: 1;
    }
    h1 {
      color: #00ffcc;
    }
    select, input, button {
      padding: 8px;
      margin: 10px 0;
      font-size: 16px;
    }
    .output {
      margin-top: 20px;
      background-color: #1e1e1e;
      padding: 15px;
      border-radius: 8px;
      white-space: pre-wrap;
    }
    #recipeContainer h3 {
      margin-top: 1em;
      color: #2a9d8f;
      font-size: 1.2em;
    }
    .recipe {
      padding-left: 1em;
    }
  </style>
</head>
<body>
  <div id="content">
    <h1>ðŸ”§ Black Shadow's Crafting Calculator</h1>

    <label for="item">Choose item:</label><br>
    <select id="item" onchange="calculate()">
      <option value="">-- Select an item --</option>
      <option value="PM Pistol">PM Pistol</option>
      <option value="M9 Pistol">M9 Pistol</option>
      <option value="Colt 1911 Pistol">Colt 1911 Pistol</option>
      <option value="M16A2 Rifle">M16A2 Rifle</option>
      <option value="MP5A2 Sub-Machine Gun">MP5A2 Sub-Machine Gun</option>
      <option value="M151A2 Off-Road">M151A2 Off-Road</option>
      <option value="UH-1 Helicopter">UH-1 Helicopter</option>
      <option value="MI-8 Helicopter">MI-8 Helicopter</option>
      <option value="S105 Car (Blue)">S105 Car (Blue)</option>
      <option value="S1203 Lab">S1203 Lab</option>
      <option value="S1203 Minibus">S1203 Minibus</option>
      <option value="UAZ-452 Van">UAZ-452 Van</option>
      <option value="M998 L.U.V">M998 L.U.V</option>
      <option value="M998 L.U.V (Canopy)">M998 L.U.V (Canopy)</option>
      <option value="M1025 Light-Armoured Vehicle">M1025 Light-Armoured Vehicle</option>
      <option value="PickUp Truck">PickUp Truck</option>
      <option value="VW Golf">VW Golf</option>
      <option value="M923A1 Transport Truck (Canopy)">M923A1 Transport Truck (Canopy)</option>
      <option value="Ural Fuel Truck">Ural Fuel Truck</option>
      <option value="Ural Transport Truck">Ural Transport Truck</option>
      <option value="Ural Canopy">Ural Canopy</option>
      <option value="Ballistic Helmet">Ballistic Helmet</option>
      <option value="Assault Helmet">Assault Helmet</option>
      <option value="Heavy Assault Helmet">Heavy Assault Helmet</option>
      <option value="Light Vest">Light Vest</option>
      <option value="Heavy Vest">Heavy Vest</option>
      <option value="Assault Vest">Assault Vest</option>
    </select><br>

    <label for="qty">Quantity:</label><br>
    <input type="number" id="qty" value="1" min="1"><br>

    <label for="sortType">Sort Recipes:</label><br>
    <select id="sortType" onchange="handleSortChange()">
      <option value="none">-- No Sorting --</option>
      <option value="alphabetical">Sort by Type (Aâ€“Z)</option>
      <option value="grouped">Group by Type</option>
    </select><br>

    <button onclick="calculate()">Calculate</button>
    <div class="output" id="output"></div>
  </div>
  <script>
    // Recipes for ALL items in dropdown, including special rotor for helicopters
    const recipes = {
      // Weapons
      "PM Pistol": { type: "Weapon", "Weapon Part": 2, "Stabilizer": 1, "Component": 1 },
      "M9 Pistol": { type: "Weapon", "Weapon Part": 3, "Stabilizer": 2, "Component": 2 },
      "Colt 1911 Pistol": { type: "Weapon", "Weapon Part": 4, "Stabilizer": 2, "Component": 2 },
      "M16A2 Rifle": { type: "Weapon", "Weapon Part": 5, "Stabilizer": 3, "Component": 3 },
      "MP5A2 Sub-Machine Gun": { type: "Weapon", "Weapon Part": 6, "Stabilizer": 3, "Component": 3 },
      // Vehicles
      "M151A2 Off-Road": { type: "Vehicle", "Mechanical Component": 8, "Interior Part": 5, "Engine Part": 8 },
      "UH-1 Helicopter": { type: "Vehicle", "Mechanical Component": 12, "Interior Part": 9, "Engine Part": 12, "Special Rotor": 1 },
      "MI-8 Helicopter": { type: "Vehicle", "Mechanical Component": 18, "Interior Part": 13, "Engine Part": 18, "Special Rotor": 1 },
      "S105 Car (Blue)": { type: "Vehicle", "Mechanical Component": 14, "Interior Part": 8, "Engine Part": 14 },
      "S1203 Lab": { type: "Vehicle", "Mechanical Component": 16, "Interior Part": 10, "Engine Part": 16 },
      "S1203 Minibus": { type: "Vehicle", "Mechanical Component": 17, "Interior Part": 11, "Engine Part": 17 },
      "UAZ-452 Van": { type: "Vehicle", "Mechanical Component": 21, "Interior Part": 13, "Engine Part": 21 },
      "M998 L.U.V": { type: "Vehicle", "Mechanical Component": 5, "Interior Part": 3, "Engine Part": 5 },
      "M998 L.U.V (Canopy)": { type: "Vehicle", "Mechanical Component": 6, "Interior Part": 4, "Engine Part": 6 },
      "M1025 Light-Armoured Vehicle": { type: "Vehicle", "Mechanical Component": 9, "Interior Part": 5, "Engine Part": 9 },
      "PickUp Truck": { type: "Vehicle", "Mechanical Component": 19, "Interior Part": 11, "Engine Part": 19 },
      "VW Golf": { type: "Vehicle", "Mechanical Component": 31, "Interior Part": 19, "Engine Part": 31 },
      // HQ/Truck Parts
      "M923A1 Transport Truck (Canopy)": { type: "HQ Part", "Mechanical Component (HQ)": 2, "Interior Part (HQ)": 2, "Engine Part (HQ)": 1 },
      "Ural Fuel Truck": { type: "HQ Part", "Mechanical Component (HQ)": 4, "Interior Part (HQ)": 3, "Engine Part (HQ)": 2 },
      "Ural Transport Truck": { type: "HQ Part", "Mechanical Component (HQ)": 4, "Interior Part (HQ)": 3, "Engine Part (HQ)": 2 },
      "Ural Canopy": { type: "HQ Part", "Mechanical Component (HQ)": 5, "Interior Part (HQ)": 5, "Engine Part (HQ)": 3 },
      // Helmets
      "Ballistic Helmet": { type: "Armor", "Helmet Shell": 1, "Helmet Liner": 1, "Interior Part": 1 },
      "Assault Helmet": { type: "Armor", "Helmet Shell": 2, "Helmet Liner": 2, "Interior Part": 2 },
      "Heavy Assault Helmet": { type: "Armor", "Helmet Shell": 3, "Helmet Liner": 2, "Interior Part": 2 },
      // Vests
      "Light Vest": { type: "Armor", "Vest Plate": 2, "Vest Fabric": 3, "Interior Part": 1 },
      "Heavy Vest": { type: "Armor", "Vest Plate": 4, "Vest Fabric": 5, "Interior Part": 2 },
      "Assault Vest": { type: "Armor", "Vest Plate": 3, "Vest Fabric": 4, "Interior Part": 2 }
    };

    function sortRecipesByType(recipesObj) {
      return Object.entries(recipesObj)
        .map(([name, data]) => ({ name, ...data }))
        .sort((a, b) => (a.type || "").localeCompare(b.type || ""));
    }

    function groupRecipesByType(recipesObj) {
      const grouped = {};
      for (const [name, data] of Object.entries(recipesObj)) {
        const type = data.type || "Unknown";
        if (!grouped[type]) grouped[type] = [];
        grouped[type].push({ name, ...data });
      }
      return grouped;
    }

    function renderGroupedRecipes(grouped) {
      const container = document.getElementById("output");
      container.innerHTML = "";
      for (const type in grouped) {
        const header = document.createElement("h3");
        header.textContent = type;
        container.appendChild(header);
        grouped[type].forEach(recipe => {
          const div = document.createElement("div");
          div.className = "recipe";
          div.textContent = recipe.name;
          container.appendChild(div);
        });
      }
    }

    function renderRecipes(recipeList) {
      const container = document.getElementById("output");
      container.innerText = "ðŸ§¾ Available Recipes:\n" + recipeList.map(r => r.name).join("\n");
    }

    function handleSortChange() {
      const value = document.getElementById("sortType").value;
      if (value === "alphabetical") {
        const sorted = sortRecipesByType(recipes);
        renderRecipes(sorted);
      } else if (value === "grouped") {
        const grouped = groupRecipesByType(recipes);
        renderGroupedRecipes(grouped);
      } else {
        renderRecipes(Object.entries(recipes).map(([name, data]) => ({ name, ...data })));
      }
    }

    function calculate() {
      const item = document.getElementById("item").value;
      const qty = parseInt(document.getElementById("qty").value);
      const recipe = recipes[item];
      const output = [];

      if (!recipe) {
        document.getElementById("output").innerText = "âŒ Item not found or not selected.";
        return;
      }

      output.push(`ðŸ”© Materials for ${qty} Ã— ${item}:\n`);

      for (const [part, count] of Object.entries(recipe)) {
        if (part !== "type") {
          const total = count * qty;
          output.push(`${part}: ${total}`);
        }
      }

      document.getElementById("output").innerText = output.join("\n");
    }

    window.onload = () => {
      renderRecipes(Object.entries(recipes).map(([name, data]) => ({ name, ...data })));
    };
  </script>
</body>
</html>
